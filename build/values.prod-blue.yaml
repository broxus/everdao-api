env:
  RUST_LOG: "bridge_api=info,dexpa=debug,sqlx=warn,transaction_buffer=info,transaction_consumer=info"
  SERVER_ADDR: 0.0.0.0:9000
  HEALTHCHECK_ADDR: 0.0.0.0:9001
  DB_POOL_SIZE: "200"
  DROP_BASE_INDEX: 1
  STATES_RPC_ENDPOINT: "http://10.1.0.90:8081/rpc"
  BROKERS: "kafka-broker-1:9092,kafka-broker-2:9092,kafka-broker-3:9092"
  KAFKA_TOPIC: "mainnet-raw-transactions"
  KAFKA_GROUP_ID: "mainnet-bridge-blue"
  KAFKA_CLIENT_ID: "mainnet-bridge-blue-api"
  DATABASE_URL: postgresql://$(NAMIB_BRIDGE_INDEXER_DB_USER):$(NAMIB_BRIDGE_INDEXER_DB_PASSWORD)@cloudsqlproxy.default:5432/bridge-indexer-mainnet-blue
  STAKING_ROOT: "0:17e938e733add71af443c73a91321a68e631db20018f8f49ae37df1d26ac60ca"
  DAO_INDEXER_URL: "https://dao.venombridge.com"
  DEX_INDEXER_URL: "https://api.web3.world"
  INDEXER_PROD_URL: "https://api.venombridge.com"
  INDEXER_TEST_URL: "https://api.venombridge.com"
  BRIDGE_ASSETS: "https://raw.githubusercontent.com/BVFDT/bridge-assets/master/manifest.json"
  MULTI_TOKENS_PROXY_ADDRESSES: "none"
  GRAPHQL_ENDPOINTS: "1,http://bridge-graph-1:8001/subgraphs/name/eth-freeton-vaults/subgraph,\
              56,http://bridge-graph-1:8000/subgraphs/name/bsc-freeton-vaults/subgraph,\
              250,http://bridge-graph-1:8002/subgraphs/name/fantom-freeton-vaults/subgraph"

controller: statefulset

service:
  port: 9000

ingress:
  enabled: false
  hosts:
    - host: api-blue.venombridge.com
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls:
    - secretName: api-blue-venombridge-com-tls
      hosts:
        - api-blue.venombridge.com

livenessProbe:
  tcpSocket:
    port: 9001
  initialDelaySeconds: 5
  periodSeconds: 10

readinessProbe:
  tcpSocket:
    port: 9001
  initialDelaySeconds: 5
  periodSeconds: 10

sharedSecrets:
  - bridgeIndexer

affinity:
  podAntiAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
    - labelSelector:
        matchExpressions:
        - key: app.kubernetes.io/name
          operator: In
          values:
          - bridge-api-green
      topologyKey: kubernetes.io/hostname
